\makeatletter

\thispagestyle{plain}

\cxset{image=breakerboys,
       subsection font-shape= upshape,}

\chapter{Documentation Macros}


\section{Documentation macros}

When developing this package the need arose to define a number of documentation macros. I~have used heavily macros and ideas present in the \pkg{doc} package, \pkg{pgf} documentation, \pkg{biblatex} documentation  and \pkg{tcolorbox} and for which I am grateful to their respective authors. The major change was to adopt the macros to use different fonts and colors and to use these from a list of key values defined at document level. More about this later. General package user documentation as opposed to package documentation that can be achieved using the doc/docstrip system requires that macros and environments be developed for the following:

\begin{enumerate}
\item Macros for command documentation.
\item Environments for commands and options.
\item Latex examples that need to be executed within the document as well as described.
\end{enumerate}


\section{Commands and Styles for Documenting macros}

The most commonly used commands for documenting macros are |\cs|, |\cmd|, |\meta|, |\marg|, |\oarg|. These commands have been defined by many authors and perhaps the best implementation can be found in the \pkg{doc}. Many package authors have redefined them in their documention, some if just to add a bit of colour, others to have them add the command to an index. As we also had a target to allow for
the package to be used in both normal documents as well as documentation
of packages and classes that use the \pkg{doc} and \pkg{docstrip} combination we provided many compatible macros.

\begin{environment}{macro} The environment macro is made available in this
package. 
\end{environment}

\DescribeMacro{macro} The environment macro is made available in this package. 

\begin{macro}{\cmd} The command \cmd{\cmd} typesets its argument in
  verbatim. Typing |\cmd{\cmd}| typsets \cmd{\cmd}. If the class
  |ltxdoc| is loaded the command is defined there. We have modified
  it to accept a colour and changes to the verbatim font 
  for consistency.
\end{macro}

\begin{macro}{meta}
The macro \cs{meta} is normally used to build other commands. On its own it can be used to typeset
examples of the argument of macros, typing |meta{Aristotle}| will typeset meta{Aristotle}. The command provides a hook to set the font via a macro |\meta@font@select|. 
\end{macro}


\def\meta@font@select{\upshape\color{black}}


\subsection{Color management}
One of the first requirements for redefining some of the standard doc commands is the need to use color easily, hence we will try and define a certain amount of keys for colors.

Just a bit of a refresher, to define colors we use, either the \cs{definecolor} or the \cs{colorlet} commands.

\emphasis{definecolor,colorlet}
\begin{tcolorbox}
\begin{lstlisting}
  \definecolor{Hyperlink}{rgb}{0.281,0.275,0.485}
  \colorlet{thehyperlink}{theblue}
\end{lstlisting}
\end{tcolorbox}

We use a semantic approach, where the colors are first defined with a mnemonic command such as {\bfseries\textcolor{theblue}{theblue}} and then we define a semantic command such as the\cs{option} that lets the color to the option command. This sort of double entry has proved useful in navigating through the dozen of the commands that I needed for this documentation.


\subsection{Semantic color names}
\begin{marglist}
\item [\option{theoption}] Coloring of options in margin lists.
\item [\option{themacro}] Coloring of command macros \cs{foo}.
\item [\option{hyperlink}] If we use the \texttt{hyperref} package a number of colors need to be defined for links.
\end{marglist}

\subsection{Named colors}
Standard colors that we provide are:
\begin{marglist}
\item [\textcolor{theblue}{theblue}] This color is used mainly for options.
\item [\textcolor{thered}{thered}] The color mostly used for macro commands and keys.
\item [\textcolor{thegreen}{thegreen}] used for environments.
\item [\textcolor{thelightgreen}{thelightgreen}] Used for margin lists.
\item [\textcolor{thegray}{thegray}] Used as a background to the listings.
\item [\colorbox{thegrey}{\color{white}thegrey}] Alias for the gray to satisfy both sides of the Atlantic and as I sometimes don't remeber which is which.
\item [\colorbox{theshade}{theshade}] Another slightly lighter shade.
\end{marglist}



\begin{marglist}
\item [\cs{cs}] \cs{cs} text Prints a command.
\item [\cs{cmd}] Prints a command.
\end{marglist}




\section{Lists for documentation}



The environment \env{marglist}
\begin{marglist}
\item[testing]\lorem
\item [test]\lorem
\end{marglist}

\env{keymarginlist}This environment is suitable for listing keys, set-in the margin.

\begin{keymarglist}
\item[bibliography] The term <bibliography>, also available as \cmd{\bibname}.
\item[references] The term <references>, also available as \cmd{refname}.
\item[shorthands] The term <list of shorthands> or <list of abbreviations>, also available as \cmd{losname}.
\end{keymarglist}


\env{argumentlist} This environment is suitable for listing macro arguments and their explanations.



\section{Breakable Boxes}

The \pkg{mdframed} as well as the newer versions of \pkg{tcolorbox}
offer breakable boxes.


\begin{tcolorbox}[enhanced, breakable,
  colback=blue!5!white,colframe=blue!75!black,title=Breakable box,
  watermark color=white,watermark text=\Roman{tcbbreakpart}]
  \lipsum[1-5]
\end{tcolorbox}





