\documentclass{book}
\usepackage{luatexbase, luacode}

\begin{document}

\begin{luacode}
local i
for i=1,1000000 do
   tex.print(i, 'x','y','z', '\\par')
end   
\end{luacode}

tests
\end{document}